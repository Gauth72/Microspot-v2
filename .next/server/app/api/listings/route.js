"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/listings/route";
exports.ids = ["app/api/listings/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Flistings%2Froute&page=%2Fapi%2Flistings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Flistings%2Froute.ts&appDir=%2FUsers%2Fgauthierfrere%2FDesktop%2FANNONCE%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fgauthierfrere%2FDesktop%2FANNONCE&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Flistings%2Froute&page=%2Fapi%2Flistings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Flistings%2Froute.ts&appDir=%2FUsers%2Fgauthierfrere%2FDesktop%2FANNONCE%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fgauthierfrere%2FDesktop%2FANNONCE&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_gauthierfrere_Desktop_ANNONCE_src_app_api_listings_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/listings/route.ts */ \"(rsc)/./src/app/api/listings/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/listings/route\",\n        pathname: \"/api/listings\",\n        filename: \"route\",\n        bundlePath: \"app/api/listings/route\"\n    },\n    resolvedPagePath: \"/Users/gauthierfrere/Desktop/ANNONCE/src/app/api/listings/route.ts\",\n    nextConfigOutput,\n    userland: _Users_gauthierfrere_Desktop_ANNONCE_src_app_api_listings_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/listings/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZsaXN0aW5ncyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGbGlzdGluZ3MlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZsaXN0aW5ncyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmdhdXRoaWVyZnJlcmUlMkZEZXNrdG9wJTJGQU5OT05DRSUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZnYXV0aGllcmZyZXJlJTJGRGVza3RvcCUyRkFOTk9OQ0UmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDa0I7QUFDL0Y7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9taWNyb3Nwb3QvP2JjNzYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2dhdXRoaWVyZnJlcmUvRGVza3RvcC9BTk5PTkNFL3NyYy9hcHAvYXBpL2xpc3RpbmdzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9saXN0aW5ncy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2xpc3RpbmdzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9saXN0aW5ncy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9nYXV0aGllcmZyZXJlL0Rlc2t0b3AvQU5OT05DRS9zcmMvYXBwL2FwaS9saXN0aW5ncy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9saXN0aW5ncy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Flistings%2Froute&page=%2Fapi%2Flistings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Flistings%2Froute.ts&appDir=%2FUsers%2Fgauthierfrere%2FDesktop%2FANNONCE%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fgauthierfrere%2FDesktop%2FANNONCE&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/listings/route.ts":
/*!***************************************!*\
  !*** ./src/app/api/listings/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n\n\n\n\nasync function POST(request) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_3__.authOptions);\n        if (!session?.user) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Non autoris\\xe9\"\n            }, {\n                status: 401\n            });\n        }\n        const data = await request.json();\n        console.log(\"Received data:\", data);\n        const { images, subCategory, specificType, ...listingData } = data;\n        // Traitement du type spécifique en fonction de la catégorie principale\n        let vendingTypeData = {};\n        if (data.mainCategory === \"VENDING_MACHINE\" && specificType) {\n            switch(subCategory){\n                case \"FOOD\":\n                    vendingTypeData = {\n                        foodVendingType: specificType\n                    };\n                    break;\n                case \"FARM\":\n                    vendingTypeData = {\n                        farmVendingType: specificType\n                    };\n                    break;\n                case \"GOODS\":\n                    vendingTypeData = {\n                        goodsVendingType: specificType\n                    };\n                    break;\n                case \"PET\":\n                    vendingTypeData = {\n                        petVendingType: specificType\n                    };\n                    break;\n            }\n        } else if (data.mainCategory === \"KIOSK\" && specificType) {\n            switch(subCategory){\n                case \"FOOD\":\n                    vendingTypeData = {\n                        foodKioskType: specificType\n                    };\n                    break;\n                case \"OTHER\":\n                    vendingTypeData = {\n                        otherKioskType: specificType\n                    };\n                    break;\n                case \"WELLNESS\":\n                    vendingTypeData = {\n                        wellnessKioskType: specificType\n                    };\n                    break;\n            }\n        } else if (specificType) {\n            switch(data.mainCategory){\n                case \"ARCADE\":\n                    vendingTypeData = {\n                        arcadeType: specificType\n                    };\n                    break;\n                case \"LOGISTICS\":\n                    vendingTypeData = {\n                        logisticsType: specificType\n                    };\n                    break;\n                case \"MISC\":\n                    vendingTypeData = {\n                        miscType: specificType\n                    };\n                    break;\n            }\n        }\n        console.log(\"ListingData with types:\", {\n            ...listingData,\n            ...vendingTypeData\n        });\n        const listing = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.listing.create({\n            data: {\n                ...listingData,\n                ...vendingTypeData,\n                ownerId: session.user.id,\n                images: {\n                    create: images.map((image)=>({\n                            url: image.url,\n                            publicId: image.publicId\n                        }))\n                }\n            },\n            include: {\n                images: true\n            }\n        });\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(listing);\n    } catch (error) {\n        console.error(\"Error creating listing:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Erreur lors de la cr\\xe9ation de l'annonce\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const mainCategory = searchParams.get(\"mainCategory\");\n        const subCategory = searchParams.get(\"subCategory\");\n        const specificType = searchParams.get(\"specificType\");\n        const minSurface = searchParams.get(\"minSurface\");\n        const maxSurface = searchParams.get(\"maxSurface\");\n        const minPrice = searchParams.get(\"minPrice\");\n        const maxPrice = searchParams.get(\"maxPrice\");\n        const city = searchParams.get(\"city\");\n        const postalCode = searchParams.get(\"postalCode\");\n        const spaceType = searchParams.get(\"spaceType\");\n        const is24_7 = searchParams.get(\"is24_7\");\n        const openBefore = searchParams.get(\"openBefore\");\n        const openAfter = searchParams.get(\"openAfter\");\n        let whereClause = {\n            status: \"ACTIVE\"\n        };\n        if (mainCategory) whereClause.mainCategory = mainCategory;\n        // Add specific type based on main category and subcategory\n        if (specificType) {\n            if (mainCategory === \"VENDING_MACHINE\") {\n                switch(subCategory){\n                    case \"FOOD\":\n                        whereClause.foodVendingType = specificType;\n                        break;\n                    case \"FARM\":\n                        whereClause.farmVendingType = specificType;\n                        break;\n                    case \"GOODS\":\n                        whereClause.goodsVendingType = specificType;\n                        break;\n                    case \"PET\":\n                        whereClause.petVendingType = specificType;\n                        break;\n                }\n            } else if (mainCategory === \"ARCADE\") {\n                whereClause.arcadeType = specificType;\n            } else if (mainCategory === \"LOGISTICS\") {\n                whereClause.logisticsType = specificType;\n            } else if (mainCategory === \"MISC\") {\n                whereClause.miscType = specificType;\n            } else if (mainCategory === \"KIOSK\") {\n                switch(subCategory){\n                    case \"FOOD\":\n                        whereClause.foodKioskType = specificType;\n                        break;\n                    case \"OTHER\":\n                        whereClause.otherKioskType = specificType;\n                        break;\n                    case \"WELLNESS\":\n                        whereClause.wellnessKioskType = specificType;\n                        break;\n                }\n            }\n        }\n        if (city) whereClause.city = {\n            contains: city,\n            mode: \"insensitive\"\n        };\n        if (postalCode) whereClause.postalCode = postalCode;\n        if (spaceType) whereClause.spaceType = spaceType;\n        if (is24_7 === \"true\") whereClause.is24_7 = true;\n        // Filtrage par horaires d'ouverture\n        if (openBefore || openAfter) {\n            whereClause.OR = [\n                {\n                    is24_7: true\n                },\n                {\n                    AND: [\n                        openBefore ? {\n                            openingTime: {\n                                lte: openBefore\n                            }\n                        } : {},\n                        openAfter ? {\n                            closingTime: {\n                                gte: openAfter\n                            }\n                        } : {}\n                    ]\n                }\n            ];\n        }\n        if (minSurface) whereClause.surface = {\n            gte: parseFloat(minSurface)\n        };\n        if (maxSurface) whereClause.surface = {\n            ...whereClause.surface,\n            lte: parseFloat(maxSurface)\n        };\n        if (minPrice) whereClause.price = {\n            gte: parseFloat(minPrice)\n        };\n        if (maxPrice) whereClause.price = {\n            ...whereClause.price,\n            lte: parseFloat(maxPrice)\n        };\n        const listings = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.listing.findMany({\n            where: whereClause,\n            include: {\n                owner: {\n                    select: {\n                        name: true,\n                        email: true\n                    }\n                },\n                images: true\n            },\n            orderBy: {\n                createdAt: \"desc\"\n            }\n        });\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(listings);\n    } catch (error) {\n        console.error(\"Error fetching listings:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Erreur lors de la r\\xe9cup\\xe9ration des annonces\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFXakI7UUFBVTtRQUVwRixNQUFNbUIsV0FBVyxNQUFNL0QsK0NBQU1BLENBQUM0QixPQUFPLENBQUNvQyxRQUFRLENBQUM7WUFDN0NDLE9BQU9kO1lBQ1BmLFNBQVM7Z0JBQ1A4QixPQUFPO29CQUNMQyxRQUFRO3dCQUNOQyxNQUFNO3dCQUNOQyxPQUFPO29CQUNUO2dCQUNGO2dCQUNBekQsUUFBUTtZQUNWO1lBQ0EwRCxTQUFTO2dCQUNQQyxXQUFXO1lBQ2I7UUFDRjtRQUVBLE9BQU96RSxrRkFBWUEsQ0FBQ1EsSUFBSSxDQUFDeUQ7SUFDM0IsRUFBRSxPQUFPeEQsT0FBTztRQUNkRyxRQUFRSCxLQUFLLENBQUMsNEJBQTRCQTtRQUMxQyxPQUFPVCxrRkFBWUEsQ0FBQ1EsSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1FBQThDLEdBQ3ZEO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWljcm9zcG90Ly4vc3JjL2FwcC9hcGkvbGlzdGluZ3Mvcm91dGUudHM/YzczOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoJztcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvbGliL3ByaXNtYSc7XG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gJ0AvbGliL2F1dGgnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oYXV0aE9wdGlvbnMpO1xuXG4gICAgaWYgKCFzZXNzaW9uPy51c2VyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdOb24gYXV0b3Jpc8OpJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIGNvbnNvbGUubG9nKCdSZWNlaXZlZCBkYXRhOicsIGRhdGEpO1xuICAgIGNvbnN0IHsgaW1hZ2VzLCBzdWJDYXRlZ29yeSwgc3BlY2lmaWNUeXBlLCAuLi5saXN0aW5nRGF0YSB9ID0gZGF0YTtcbiAgICBcbiAgICAvLyBUcmFpdGVtZW50IGR1IHR5cGUgc3DDqWNpZmlxdWUgZW4gZm9uY3Rpb24gZGUgbGEgY2F0w6lnb3JpZSBwcmluY2lwYWxlXG4gICAgbGV0IHZlbmRpbmdUeXBlRGF0YSA9IHt9O1xuICAgIGlmIChkYXRhLm1haW5DYXRlZ29yeSA9PT0gJ1ZFTkRJTkdfTUFDSElORScgJiYgc3BlY2lmaWNUeXBlKSB7XG4gICAgICBzd2l0Y2ggKHN1YkNhdGVnb3J5KSB7XG4gICAgICAgIGNhc2UgJ0ZPT0QnOlxuICAgICAgICAgIHZlbmRpbmdUeXBlRGF0YSA9IHsgZm9vZFZlbmRpbmdUeXBlOiBzcGVjaWZpY1R5cGUgfTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnRkFSTSc6XG4gICAgICAgICAgdmVuZGluZ1R5cGVEYXRhID0geyBmYXJtVmVuZGluZ1R5cGU6IHNwZWNpZmljVHlwZSB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdHT09EUyc6XG4gICAgICAgICAgdmVuZGluZ1R5cGVEYXRhID0geyBnb29kc1ZlbmRpbmdUeXBlOiBzcGVjaWZpY1R5cGUgfTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnUEVUJzpcbiAgICAgICAgICB2ZW5kaW5nVHlwZURhdGEgPSB7IHBldFZlbmRpbmdUeXBlOiBzcGVjaWZpY1R5cGUgfTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGRhdGEubWFpbkNhdGVnb3J5ID09PSAnS0lPU0snICYmIHNwZWNpZmljVHlwZSkge1xuICAgICAgc3dpdGNoIChzdWJDYXRlZ29yeSkge1xuICAgICAgICBjYXNlICdGT09EJzpcbiAgICAgICAgICB2ZW5kaW5nVHlwZURhdGEgPSB7IGZvb2RLaW9za1R5cGU6IHNwZWNpZmljVHlwZSB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdPVEhFUic6XG4gICAgICAgICAgdmVuZGluZ1R5cGVEYXRhID0geyBvdGhlcktpb3NrVHlwZTogc3BlY2lmaWNUeXBlIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1dFTExORVNTJzpcbiAgICAgICAgICB2ZW5kaW5nVHlwZURhdGEgPSB7IHdlbGxuZXNzS2lvc2tUeXBlOiBzcGVjaWZpY1R5cGUgfTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHNwZWNpZmljVHlwZSkge1xuICAgICAgc3dpdGNoIChkYXRhLm1haW5DYXRlZ29yeSkge1xuICAgICAgICBjYXNlICdBUkNBREUnOlxuICAgICAgICAgIHZlbmRpbmdUeXBlRGF0YSA9IHsgYXJjYWRlVHlwZTogc3BlY2lmaWNUeXBlIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0xPR0lTVElDUyc6XG4gICAgICAgICAgdmVuZGluZ1R5cGVEYXRhID0geyBsb2dpc3RpY3NUeXBlOiBzcGVjaWZpY1R5cGUgfTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnTUlTQyc6XG4gICAgICAgICAgdmVuZGluZ1R5cGVEYXRhID0geyBtaXNjVHlwZTogc3BlY2lmaWNUeXBlIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ0xpc3RpbmdEYXRhIHdpdGggdHlwZXM6JywgeyAuLi5saXN0aW5nRGF0YSwgLi4udmVuZGluZ1R5cGVEYXRhIH0pO1xuICAgIFxuICAgIGNvbnN0IGxpc3RpbmcgPSBhd2FpdCBwcmlzbWEubGlzdGluZy5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICAuLi5saXN0aW5nRGF0YSxcbiAgICAgICAgLi4udmVuZGluZ1R5cGVEYXRhLFxuICAgICAgICBvd25lcklkOiBzZXNzaW9uLnVzZXIuaWQsXG4gICAgICAgIGltYWdlczoge1xuICAgICAgICAgIGNyZWF0ZTogaW1hZ2VzLm1hcCgoaW1hZ2U6IHsgdXJsOiBzdHJpbmc7IHB1YmxpY0lkOiBzdHJpbmcgfSkgPT4gKHtcbiAgICAgICAgICAgIHVybDogaW1hZ2UudXJsLFxuICAgICAgICAgICAgcHVibGljSWQ6IGltYWdlLnB1YmxpY0lkLFxuICAgICAgICAgIH0pKSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIGltYWdlczogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24obGlzdGluZyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgbGlzdGluZzonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0VycmV1ciBsb3JzIGRlIGxhIGNyw6lhdGlvbiBkZSBsXFwnYW5ub25jZScgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xuICAgIGNvbnN0IG1haW5DYXRlZ29yeSA9IHNlYXJjaFBhcmFtcy5nZXQoJ21haW5DYXRlZ29yeScpO1xuICAgIGNvbnN0IHN1YkNhdGVnb3J5ID0gc2VhcmNoUGFyYW1zLmdldCgnc3ViQ2F0ZWdvcnknKTtcbiAgICBjb25zdCBzcGVjaWZpY1R5cGUgPSBzZWFyY2hQYXJhbXMuZ2V0KCdzcGVjaWZpY1R5cGUnKTtcbiAgICBjb25zdCBtaW5TdXJmYWNlID0gc2VhcmNoUGFyYW1zLmdldCgnbWluU3VyZmFjZScpO1xuICAgIGNvbnN0IG1heFN1cmZhY2UgPSBzZWFyY2hQYXJhbXMuZ2V0KCdtYXhTdXJmYWNlJyk7XG4gICAgY29uc3QgbWluUHJpY2UgPSBzZWFyY2hQYXJhbXMuZ2V0KCdtaW5QcmljZScpO1xuICAgIGNvbnN0IG1heFByaWNlID0gc2VhcmNoUGFyYW1zLmdldCgnbWF4UHJpY2UnKTtcbiAgICBjb25zdCBjaXR5ID0gc2VhcmNoUGFyYW1zLmdldCgnY2l0eScpO1xuICAgIGNvbnN0IHBvc3RhbENvZGUgPSBzZWFyY2hQYXJhbXMuZ2V0KCdwb3N0YWxDb2RlJyk7XG4gICAgY29uc3Qgc3BhY2VUeXBlID0gc2VhcmNoUGFyYW1zLmdldCgnc3BhY2VUeXBlJyk7XG4gICAgY29uc3QgaXMyNF83ID0gc2VhcmNoUGFyYW1zLmdldCgnaXMyNF83Jyk7XG4gICAgY29uc3Qgb3BlbkJlZm9yZSA9IHNlYXJjaFBhcmFtcy5nZXQoJ29wZW5CZWZvcmUnKTtcbiAgICBjb25zdCBvcGVuQWZ0ZXIgPSBzZWFyY2hQYXJhbXMuZ2V0KCdvcGVuQWZ0ZXInKTtcblxuICAgIGxldCB3aGVyZUNsYXVzZTogYW55ID0ge1xuICAgICAgc3RhdHVzOiAnQUNUSVZFJyxcbiAgICB9O1xuXG4gICAgaWYgKG1haW5DYXRlZ29yeSkgd2hlcmVDbGF1c2UubWFpbkNhdGVnb3J5ID0gbWFpbkNhdGVnb3J5O1xuXG4gICAgLy8gQWRkIHNwZWNpZmljIHR5cGUgYmFzZWQgb24gbWFpbiBjYXRlZ29yeSBhbmQgc3ViY2F0ZWdvcnlcbiAgICBpZiAoc3BlY2lmaWNUeXBlKSB7XG4gICAgICBpZiAobWFpbkNhdGVnb3J5ID09PSAnVkVORElOR19NQUNISU5FJykge1xuICAgICAgICBzd2l0Y2ggKHN1YkNhdGVnb3J5KSB7XG4gICAgICAgICAgY2FzZSAnRk9PRCc6XG4gICAgICAgICAgICB3aGVyZUNsYXVzZS5mb29kVmVuZGluZ1R5cGUgPSBzcGVjaWZpY1R5cGU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdGQVJNJzpcbiAgICAgICAgICAgIHdoZXJlQ2xhdXNlLmZhcm1WZW5kaW5nVHlwZSA9IHNwZWNpZmljVHlwZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ0dPT0RTJzpcbiAgICAgICAgICAgIHdoZXJlQ2xhdXNlLmdvb2RzVmVuZGluZ1R5cGUgPSBzcGVjaWZpY1R5cGU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdQRVQnOlxuICAgICAgICAgICAgd2hlcmVDbGF1c2UucGV0VmVuZGluZ1R5cGUgPSBzcGVjaWZpY1R5cGU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChtYWluQ2F0ZWdvcnkgPT09ICdBUkNBREUnKSB7XG4gICAgICAgIHdoZXJlQ2xhdXNlLmFyY2FkZVR5cGUgPSBzcGVjaWZpY1R5cGU7XG4gICAgICB9IGVsc2UgaWYgKG1haW5DYXRlZ29yeSA9PT0gJ0xPR0lTVElDUycpIHtcbiAgICAgICAgd2hlcmVDbGF1c2UubG9naXN0aWNzVHlwZSA9IHNwZWNpZmljVHlwZTtcbiAgICAgIH0gZWxzZSBpZiAobWFpbkNhdGVnb3J5ID09PSAnTUlTQycpIHtcbiAgICAgICAgd2hlcmVDbGF1c2UubWlzY1R5cGUgPSBzcGVjaWZpY1R5cGU7XG4gICAgICB9IGVsc2UgaWYgKG1haW5DYXRlZ29yeSA9PT0gJ0tJT1NLJykge1xuICAgICAgICBzd2l0Y2ggKHN1YkNhdGVnb3J5KSB7XG4gICAgICAgICAgY2FzZSAnRk9PRCc6XG4gICAgICAgICAgICB3aGVyZUNsYXVzZS5mb29kS2lvc2tUeXBlID0gc3BlY2lmaWNUeXBlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnT1RIRVInOlxuICAgICAgICAgICAgd2hlcmVDbGF1c2Uub3RoZXJLaW9za1R5cGUgPSBzcGVjaWZpY1R5cGU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdXRUxMTkVTUyc6XG4gICAgICAgICAgICB3aGVyZUNsYXVzZS53ZWxsbmVzc0tpb3NrVHlwZSA9IHNwZWNpZmljVHlwZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjaXR5KSB3aGVyZUNsYXVzZS5jaXR5ID0geyBjb250YWluczogY2l0eSwgbW9kZTogJ2luc2Vuc2l0aXZlJyB9O1xuICAgIGlmIChwb3N0YWxDb2RlKSB3aGVyZUNsYXVzZS5wb3N0YWxDb2RlID0gcG9zdGFsQ29kZTtcbiAgICBpZiAoc3BhY2VUeXBlKSB3aGVyZUNsYXVzZS5zcGFjZVR5cGUgPSBzcGFjZVR5cGU7XG4gICAgaWYgKGlzMjRfNyA9PT0gJ3RydWUnKSB3aGVyZUNsYXVzZS5pczI0XzcgPSB0cnVlO1xuICAgIFxuICAgIC8vIEZpbHRyYWdlIHBhciBob3JhaXJlcyBkJ291dmVydHVyZVxuICAgIGlmIChvcGVuQmVmb3JlIHx8IG9wZW5BZnRlcikge1xuICAgICAgd2hlcmVDbGF1c2UuT1IgPSBbXG4gICAgICAgIHsgaXMyNF83OiB0cnVlIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBBTkQ6IFtcbiAgICAgICAgICAgIG9wZW5CZWZvcmUgPyB7IG9wZW5pbmdUaW1lOiB7IGx0ZTogb3BlbkJlZm9yZSB9IH0gOiB7fSxcbiAgICAgICAgICAgIG9wZW5BZnRlciA/IHsgY2xvc2luZ1RpbWU6IHsgZ3RlOiBvcGVuQWZ0ZXIgfSB9IDoge31cbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgIF07XG4gICAgfVxuICAgIGlmIChtaW5TdXJmYWNlKSB3aGVyZUNsYXVzZS5zdXJmYWNlID0geyBndGU6IHBhcnNlRmxvYXQobWluU3VyZmFjZSkgfTtcbiAgICBpZiAobWF4U3VyZmFjZSkgd2hlcmVDbGF1c2Uuc3VyZmFjZSA9IHsgLi4ud2hlcmVDbGF1c2Uuc3VyZmFjZSwgbHRlOiBwYXJzZUZsb2F0KG1heFN1cmZhY2UpIH07XG4gICAgaWYgKG1pblByaWNlKSB3aGVyZUNsYXVzZS5wcmljZSA9IHsgZ3RlOiBwYXJzZUZsb2F0KG1pblByaWNlKSB9O1xuICAgIGlmIChtYXhQcmljZSkgd2hlcmVDbGF1c2UucHJpY2UgPSB7IC4uLndoZXJlQ2xhdXNlLnByaWNlLCBsdGU6IHBhcnNlRmxvYXQobWF4UHJpY2UpIH07XG5cbiAgICBjb25zdCBsaXN0aW5ncyA9IGF3YWl0IHByaXNtYS5saXN0aW5nLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB3aGVyZUNsYXVzZSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgb3duZXI6IHtcbiAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBpbWFnZXM6IHRydWUsXG4gICAgICB9LFxuICAgICAgb3JkZXJCeToge1xuICAgICAgICBjcmVhdGVkQXQ6ICdkZXNjJyxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24obGlzdGluZ3MpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGxpc3RpbmdzOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIGFubm9uY2VzJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldFNlcnZlclNlc3Npb24iLCJwcmlzbWEiLCJhdXRoT3B0aW9ucyIsIlBPU1QiLCJyZXF1ZXN0Iiwic2Vzc2lvbiIsInVzZXIiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJkYXRhIiwiY29uc29sZSIsImxvZyIsImltYWdlcyIsInN1YkNhdGVnb3J5Iiwic3BlY2lmaWNUeXBlIiwibGlzdGluZ0RhdGEiLCJ2ZW5kaW5nVHlwZURhdGEiLCJtYWluQ2F0ZWdvcnkiLCJmb29kVmVuZGluZ1R5cGUiLCJmYXJtVmVuZGluZ1R5cGUiLCJnb29kc1ZlbmRpbmdUeXBlIiwicGV0VmVuZGluZ1R5cGUiLCJmb29kS2lvc2tUeXBlIiwib3RoZXJLaW9za1R5cGUiLCJ3ZWxsbmVzc0tpb3NrVHlwZSIsImFyY2FkZVR5cGUiLCJsb2dpc3RpY3NUeXBlIiwibWlzY1R5cGUiLCJsaXN0aW5nIiwiY3JlYXRlIiwib3duZXJJZCIsImlkIiwibWFwIiwiaW1hZ2UiLCJ1cmwiLCJwdWJsaWNJZCIsImluY2x1ZGUiLCJHRVQiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJnZXQiLCJtaW5TdXJmYWNlIiwibWF4U3VyZmFjZSIsIm1pblByaWNlIiwibWF4UHJpY2UiLCJjaXR5IiwicG9zdGFsQ29kZSIsInNwYWNlVHlwZSIsImlzMjRfNyIsIm9wZW5CZWZvcmUiLCJvcGVuQWZ0ZXIiLCJ3aGVyZUNsYXVzZSIsImNvbnRhaW5zIiwibW9kZSIsIk9SIiwiQU5EIiwib3BlbmluZ1RpbWUiLCJsdGUiLCJjbG9zaW5nVGltZSIsImd0ZSIsInN1cmZhY2UiLCJwYXJzZUZsb2F0IiwicHJpY2UiLCJsaXN0aW5ncyIsImZpbmRNYW55Iiwid2hlcmUiLCJvd25lciIsInNlbGVjdCIsIm5hbWUiLCJlbWFpbCIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/listings/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @auth/prisma-adapter */ \"(rsc)/./node_modules/@auth/prisma-adapter/index.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n\n\n\n\nconst authOptions = {\n    adapter: (0,_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_1__.PrismaAdapter)(_lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma),\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            name: \"credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    return null;\n                }\n                const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findUnique({\n                    where: {\n                        email: credentials.email\n                    },\n                    include: {\n                        profileImage: true\n                    }\n                });\n                if (!user || !user.password) {\n                    return null;\n                }\n                const isValid = await (0,bcryptjs__WEBPACK_IMPORTED_MODULE_3__.compare)(credentials.password, user.password);\n                if (!isValid) {\n                    return null;\n                }\n                return user;\n            }\n        })\n    ],\n    session: {\n        strategy: \"jwt\"\n    },\n    pages: {\n        signIn: \"/login\"\n    },\n    callbacks: {\n        async session ({ session, token }) {\n            if (session.user) {\n                session.user.id = token.sub;\n                // Récupérer l'utilisateur avec son image de profil\n                const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findUnique({\n                    where: {\n                        id: token.sub\n                    },\n                    include: {\n                        profileImage: true\n                    }\n                });\n                if (user?.profileImage) {\n                    session.user.profileImage = {\n                        url: user.profileImage.url,\n                        publicId: user.profileImage.publicId\n                    };\n                }\n            }\n            return session;\n        },\n        async jwt ({ token, user }) {\n            if (user) {\n                token.sub = user.id;\n            }\n            return token;\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDa0U7QUFDYjtBQUNmO0FBQ0g7QUFFNUIsTUFBTUksY0FBK0I7SUFDMUNDLFNBQVNKLG1FQUFhQSxDQUFDQywrQ0FBTUE7SUFDN0JJLFdBQVc7UUFDVE4sMkVBQW1CQSxDQUFDO1lBQ2xCTyxNQUFNO1lBQ05DLGFBQWE7Z0JBQ1hDLE9BQU87b0JBQUVDLE9BQU87b0JBQVNDLE1BQU07Z0JBQVE7Z0JBQ3ZDQyxVQUFVO29CQUFFRixPQUFPO29CQUFZQyxNQUFNO2dCQUFXO1lBQ2xEO1lBQ0EsTUFBTUUsV0FBVUwsV0FBVztnQkFDekIsSUFBSSxDQUFDQSxhQUFhQyxTQUFTLENBQUNELGFBQWFJLFVBQVU7b0JBQ2pELE9BQU87Z0JBQ1Q7Z0JBRUEsTUFBTUUsT0FBTyxNQUFNWiwrQ0FBTUEsQ0FBQ1ksSUFBSSxDQUFDQyxVQUFVLENBQUM7b0JBQ3hDQyxPQUFPO3dCQUNMUCxPQUFPRCxZQUFZQyxLQUFLO29CQUMxQjtvQkFDQVEsU0FBUzt3QkFDUEMsY0FBYztvQkFDaEI7Z0JBQ0Y7Z0JBRUEsSUFBSSxDQUFDSixRQUFRLENBQUNBLEtBQUtGLFFBQVEsRUFBRTtvQkFDM0IsT0FBTztnQkFDVDtnQkFFQSxNQUFNTyxVQUFVLE1BQU1oQixpREFBT0EsQ0FBQ0ssWUFBWUksUUFBUSxFQUFFRSxLQUFLRixRQUFRO2dCQUVqRSxJQUFJLENBQUNPLFNBQVM7b0JBQ1osT0FBTztnQkFDVDtnQkFFQSxPQUFPTDtZQUNUO1FBQ0Y7S0FDRDtJQUNETSxTQUFTO1FBQ1BDLFVBQVU7SUFDWjtJQUNBQyxPQUFPO1FBQ0xDLFFBQVE7SUFDVjtJQUNBQyxXQUFXO1FBQ1QsTUFBTUosU0FBUSxFQUFFQSxPQUFPLEVBQUVLLEtBQUssRUFBRTtZQUM5QixJQUFJTCxRQUFRTixJQUFJLEVBQUU7Z0JBQ2hCTSxRQUFRTixJQUFJLENBQUNZLEVBQUUsR0FBR0QsTUFBTUUsR0FBRztnQkFFM0IsbURBQW1EO2dCQUNuRCxNQUFNYixPQUFPLE1BQU1aLCtDQUFNQSxDQUFDWSxJQUFJLENBQUNDLFVBQVUsQ0FBQztvQkFDeENDLE9BQU87d0JBQUVVLElBQUlELE1BQU1FLEdBQUc7b0JBQUM7b0JBQ3ZCVixTQUFTO3dCQUFFQyxjQUFjO29CQUFLO2dCQUNoQztnQkFFQSxJQUFJSixNQUFNSSxjQUFjO29CQUN0QkUsUUFBUU4sSUFBSSxDQUFDSSxZQUFZLEdBQUc7d0JBQzFCVSxLQUFLZCxLQUFLSSxZQUFZLENBQUNVLEdBQUc7d0JBQzFCQyxVQUFVZixLQUFLSSxZQUFZLENBQUNXLFFBQVE7b0JBQ3RDO2dCQUNGO1lBQ0Y7WUFDQSxPQUFPVDtRQUNUO1FBQ0EsTUFBTVUsS0FBSSxFQUFFTCxLQUFLLEVBQUVYLElBQUksRUFBRTtZQUN2QixJQUFJQSxNQUFNO2dCQUNSVyxNQUFNRSxHQUFHLEdBQUdiLEtBQUtZLEVBQUU7WUFDckI7WUFDQSxPQUFPRDtRQUNUO0lBQ0Y7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWljcm9zcG90Ly4vc3JjL2xpYi9hdXRoLnRzPzY2OTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEF1dGhPcHRpb25zIH0gZnJvbSAnbmV4dC1hdXRoJztcbmltcG9ydCBDcmVkZW50aWFsc1Byb3ZpZGVyIGZyb20gJ25leHQtYXV0aC9wcm92aWRlcnMvY3JlZGVudGlhbHMnO1xuaW1wb3J0IHsgUHJpc21hQWRhcHRlciB9IGZyb20gJ0BhdXRoL3ByaXNtYS1hZGFwdGVyJztcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvbGliL3ByaXNtYSc7XG5pbXBvcnQgeyBjb21wYXJlIH0gZnJvbSAnYmNyeXB0anMnO1xuXG5leHBvcnQgY29uc3QgYXV0aE9wdGlvbnM6IE5leHRBdXRoT3B0aW9ucyA9IHtcbiAgYWRhcHRlcjogUHJpc21hQWRhcHRlcihwcmlzbWEpLFxuICBwcm92aWRlcnM6IFtcbiAgICBDcmVkZW50aWFsc1Byb3ZpZGVyKHtcbiAgICAgIG5hbWU6ICdjcmVkZW50aWFscycsXG4gICAgICBjcmVkZW50aWFsczoge1xuICAgICAgICBlbWFpbDogeyBsYWJlbDogJ0VtYWlsJywgdHlwZTogJ2VtYWlsJyB9LFxuICAgICAgICBwYXNzd29yZDogeyBsYWJlbDogJ1Bhc3N3b3JkJywgdHlwZTogJ3Bhc3N3b3JkJyB9XG4gICAgICB9LFxuICAgICAgYXN5bmMgYXV0aG9yaXplKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIGlmICghY3JlZGVudGlhbHM/LmVtYWlsIHx8ICFjcmVkZW50aWFscz8ucGFzc3dvcmQpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgZW1haWw6IGNyZWRlbnRpYWxzLmVtYWlsLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgcHJvZmlsZUltYWdlOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghdXNlciB8fCAhdXNlci5wYXNzd29yZCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaXNWYWxpZCA9IGF3YWl0IGNvbXBhcmUoY3JlZGVudGlhbHMucGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpO1xuXG4gICAgICAgIGlmICghaXNWYWxpZCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVzZXI7XG4gICAgICB9LFxuICAgIH0pXG4gIF0sXG4gIHNlc3Npb246IHtcbiAgICBzdHJhdGVneTogJ2p3dCdcbiAgfSxcbiAgcGFnZXM6IHtcbiAgICBzaWduSW46ICcvbG9naW4nLFxuICB9LFxuICBjYWxsYmFja3M6IHtcbiAgICBhc3luYyBzZXNzaW9uKHsgc2Vzc2lvbiwgdG9rZW4gfSkge1xuICAgICAgaWYgKHNlc3Npb24udXNlcikge1xuICAgICAgICBzZXNzaW9uLnVzZXIuaWQgPSB0b2tlbi5zdWI7XG5cbiAgICAgICAgLy8gUsOpY3Vww6lyZXIgbCd1dGlsaXNhdGV1ciBhdmVjIHNvbiBpbWFnZSBkZSBwcm9maWxcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiB0b2tlbi5zdWIgfSxcbiAgICAgICAgICBpbmNsdWRlOiB7IHByb2ZpbGVJbWFnZTogdHJ1ZSB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodXNlcj8ucHJvZmlsZUltYWdlKSB7XG4gICAgICAgICAgc2Vzc2lvbi51c2VyLnByb2ZpbGVJbWFnZSA9IHtcbiAgICAgICAgICAgIHVybDogdXNlci5wcm9maWxlSW1hZ2UudXJsLFxuICAgICAgICAgICAgcHVibGljSWQ6IHVzZXIucHJvZmlsZUltYWdlLnB1YmxpY0lkLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzZXNzaW9uO1xuICAgIH0sXG4gICAgYXN5bmMgand0KHsgdG9rZW4sIHVzZXIgfSkge1xuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgdG9rZW4uc3ViID0gdXNlci5pZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9LFxuICB9XG59O1xuIl0sIm5hbWVzIjpbIkNyZWRlbnRpYWxzUHJvdmlkZXIiLCJQcmlzbWFBZGFwdGVyIiwicHJpc21hIiwiY29tcGFyZSIsImF1dGhPcHRpb25zIiwiYWRhcHRlciIsInByb3ZpZGVycyIsIm5hbWUiLCJjcmVkZW50aWFscyIsImVtYWlsIiwibGFiZWwiLCJ0eXBlIiwicGFzc3dvcmQiLCJhdXRob3JpemUiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaW5jbHVkZSIsInByb2ZpbGVJbWFnZSIsImlzVmFsaWQiLCJzZXNzaW9uIiwic3RyYXRlZ3kiLCJwYWdlcyIsInNpZ25JbiIsImNhbGxiYWNrcyIsInRva2VuIiwiaWQiLCJzdWIiLCJ1cmwiLCJwdWJsaWNJZCIsImp3dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) {\n    globalForPrisma.prisma = prisma;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFFOUMsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsR0FBRztBQUVuRSxJQUFJSSxJQUF5QixFQUFjO0lBQ3pDSCxnQkFBZ0JFLE1BQU0sR0FBR0E7QUFDM0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9taWNyb3Nwb3QvLi9zcmMvbGliL3ByaXNtYS50cz8wMWQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcblxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcbiAgcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWQ7XG59O1xuXG5leHBvcnQgY29uc3QgcHJpc21hID0gZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/PyBuZXcgUHJpc21hQ2xpZW50KCk7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWE7XG59XG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsInByaXNtYSIsInByb2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/bcryptjs","vendor-chunks/oauth","vendor-chunks/object-hash","vendor-chunks/preact","vendor-chunks/preact-render-to-string","vendor-chunks/uuid","vendor-chunks/yallist","vendor-chunks/lru-cache","vendor-chunks/cookie","vendor-chunks/@auth","vendor-chunks/oidc-token-hash","vendor-chunks/@panva"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Flistings%2Froute&page=%2Fapi%2Flistings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Flistings%2Froute.ts&appDir=%2FUsers%2Fgauthierfrere%2FDesktop%2FANNONCE%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fgauthierfrere%2FDesktop%2FANNONCE&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();